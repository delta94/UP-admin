language: python
python: 3.6.6
node_js: '8'
addons:
  postgresql: "9.6"
services:
- postgresql
before_install:
- nvm install 8.11.3
- npm i -g npm@^6.3.0
- npm install -g yarn@^1.9.0
- node --version && npm --version && yarn --version && python --version
- printf "//npm.fontawesome.com/:_authToken=${FONTAWESOME_TOKEN}\n" >> .npmrc
- source bump-version.sh
install:
- pip install -r requirements.txt
- pip install codecov
- yarn install
before_script:
- psql -c 'create database travis_ci_test;' -U postgres
script:
- source release-tasks.sh
- ls
- coverage run --source=admin,api --omit=*/migrations/* manage.py test
after_success:
- codecov --token=$CODECOV_TOKEN
notifications:
  email: false
  slack:
    secure: kNfvnpEk/TDNyqA6ueJ4cjpAtHKhoDp1sGLuhbj2KHYy4kivA1gDcWiF/Hdp9hAGlCiYVoMrY+dETyFY+zdwJtHbAolAEY0KGeb+Nwy1frU2aFSywbxC/CrnOHNCboTiOEpPivWpX5NAhypAlT0FTN5IFnYfbAkl+u0bnWIXbtxMDDxcV8PnN1IucKAvJeC6FPa7l4dPVmpe8dc0lsDPLD8713O+UG+I2d8CPP4yoYIgqdzLjd9zr05/albSXCXz+MjSfoA2QVfYRIpw0NyegMNdwChdBOTP9xds2D7P0xjLYhPVz98y2i4SyBzZcj+JXRYeA6Voi4WPAKeQHUJunA/dpEUZ/Rt2jIeNBAQxOUmRH+vmhKq+c9OwzeOfNUk7gZHxMFs3MEwPtDy62O9KmazzDDzr5hOCOqKboiGQONWt7Rp1yv4jzxlVZ6OxvzDF/COWnQLOIjVBzjSFIQH6LO5Gz/01ZQAqmtaZoWBb8xr3aebXDbrsPO6YSJZMyfXl4mRcMUGmGpEn1600jACpOKWED5NheRqIZnkSHBT/EurjFSXm7O+GztrPB14m3mBFn4o9xaQrkx35Zop0ZFf33w/UA+CeJ1jMdmArXF7RcNNcWQcZG8KbkIVj2qYUNY7sPjx+3K4B604jaAIj/Iwyoa+xQud0dR4zGZjcNzjRRPk=
deploy:
- provider: heroku
  api_key:
    secure: ueX0toME+Rxit2fT/YEE+b5+7gVi6awhBLQrOH/gT69n3YRUkerX/Pjnrun9FRpcjLwRTaxqLWzM2coXRWStE/1YmFBgi+Gtxki3DMCgZ0pUHhyPmy8GhG0kQI6OQGLcNhhzLrLNqar0XQYGwQnb/a+1eprv9+zoAJtApBtibASKkYnhgwVRonJrp99shMLH7ZWLdGe5jXDQVNkcAHR6p/srGdJlIiB3N6+oTyZsOem+cFR+FsC60CHxZFQmgSocMK59P3gUe8BeDZGRSlNek99aNdOG9MtQm+ljtZYYxd2ELZDKEUWue3SwBGpCy9szHT23IawfaSliBn9V5o4m3KSWtKnIuyqE37I3njBNisCCX7pxOzqfA+j63fMtERCXyMHnxS3+PqQFQ1pr4rx/6WJK36j0livtr2AEpYZVTfSvI4zrASN4K5hAqYk0mtCSzGKLh554iuugUFspkIFI9JyO3Es7bOqecgrxa7WObtiMfbPizTHxXP8M6w9BhOe1pmdPxyfT8xz+8J7p+agya0/PwBkgCpiJEIx4nJzyMSJCwBOre/YS3xkHZVqdU9qp0jTgdFkAppl5FhO1muNb1J6EmOKMKp53Z6TGgM5qZqxROoKKNy9+bcfreTBtFEZh4WopMxOFY2Z90VggchIYsKH1Otp16wRFBX6pa4M27qo=
  app:
    master: uspesnyprvnacek-staging
  skip_cleanup: true
- provider: heroku
  api_key:
    secure: ueX0toME+Rxit2fT/YEE+b5+7gVi6awhBLQrOH/gT69n3YRUkerX/Pjnrun9FRpcjLwRTaxqLWzM2coXRWStE/1YmFBgi+Gtxki3DMCgZ0pUHhyPmy8GhG0kQI6OQGLcNhhzLrLNqar0XQYGwQnb/a+1eprv9+zoAJtApBtibASKkYnhgwVRonJrp99shMLH7ZWLdGe5jXDQVNkcAHR6p/srGdJlIiB3N6+oTyZsOem+cFR+FsC60CHxZFQmgSocMK59P3gUe8BeDZGRSlNek99aNdOG9MtQm+ljtZYYxd2ELZDKEUWue3SwBGpCy9szHT23IawfaSliBn9V5o4m3KSWtKnIuyqE37I3njBNisCCX7pxOzqfA+j63fMtERCXyMHnxS3+PqQFQ1pr4rx/6WJK36j0livtr2AEpYZVTfSvI4zrASN4K5hAqYk0mtCSzGKLh554iuugUFspkIFI9JyO3Es7bOqecgrxa7WObtiMfbPizTHxXP8M6w9BhOe1pmdPxyfT8xz+8J7p+agya0/PwBkgCpiJEIx4nJzyMSJCwBOre/YS3xkHZVqdU9qp0jTgdFkAppl5FhO1muNb1J6EmOKMKp53Z6TGgM5qZqxROoKKNy9+bcfreTBtFEZh4WopMxOFY2Z90VggchIYsKH1Otp16wRFBX6pa4M27qo=
  app:
    master: uspesnyprvnacek
  skip_cleanup: true
env:
  global:
  - secure: PHIo9ft4K/kxXBBNPHirqXnRJqACexh5RMb8E6VI03Bw2r1QEnw7f6bbpZWX6mUm9B7LM9sGuq7UC598ucgAmKjyYLDVREIo/xyIeimjAkE/2rrvexzzG96EkAKAJZcqOL9j1x/ywQa4ZqPKUNDP5pmwQuTJSiBsgucI2kIcbIaTv7DNJecoMqosMExtppItsRctCqRZnkFBrG1KYH8rgkDSbXCZsDLxYWL0TUZzZpzopVH4DfW3jof+bzu5F64mvsjuiwLu93QkOm0lvy5+P7SnTduzwifeoauVzU0fj1VWmPAAoTDSBVyxPjBrK9MkoCasFYu4ESAsiOLSVMzukzFIIUw+1Va3nLxWY2isF+D1NhlVxatpk5Xuo4OJxn41p1yrdGr9JFC1rJkQWduW4rirYM/ZJ0JSVmuX4wFVcsBp8gOe0SK9Wvr9Ks5P0RybmTfA9ZBTAexrobHW4bnQz/oXgC1uZ9vi545pjq4hlBhq3sB9iHgYlF2WYmH4fTf8H4x4SetBkKR4moPQqKHK9qnRyCc4DG+QZOu8uM1sLn6ho3mvrCA737DDgpRl2gLKrSe8xov8HfvhybctM0x6M6RV41ovDNOhH9SyuAi6/k2zBAxqoiW/yQLl/cS/HwSkTgviXrkw8WhIB/Wm4eioDridHIJaYytT3NiCXZcJdTk=
  - secure: itf001mexI0C1h5u/B2ecdB359zHwGkws5Lw7wTB/eQV2Vr5IeaLwAp4JACzub/VpSYEpTZux0lXVPW1nWSWNHhVJNXYY5JQgq+5hKGbt56OYCrjE/1olAxfYpJNP2Yh12sDeww7h6TkFr37anaGK3ZhMmzKrHygQg2mPo+cvpgudvd9fOc/zqRDkX8+FPoFveEZzETEmIstRMYeAz1+nWaNfekqWPHvypItx8EqGBHO3fMEFF1qI2kzzlvwGQYS+lpFiX3pt5rB+wkntJjbcUirFfylvH3SF5zV/T1EuI3qbF1U7LDM9vPjwnqHPw7c1BFaFKTJTlpJOlqgKVNXb97qJJQgWvx8iQgH47Wf970Ro24qEfVjtSFy8BjMJPKeyNN3IHJ/Pf13Y5nQ/SvFL1r5G9ckIGePc44gMeSGnd2I7xko+CllZ5k87f4Sc6f1op9SRHqmWgzqzVQsy29NTUJXNzzuh2wbSLcZ80lLQpD1iKKTUxkgs0GsyWou59bKkCrVzewx7nWvXPzOwsZ9zf1v+V7t7bdxlN/g9oTMrG94XDIRl2Vpq4UHJUzYOZdeWszbMHaGaC0YU20rmdlJgoIy+5f723xfBRK+b6KoiM2kqXGow4NLzw3Zq3GjDyny0BK/p/xxaxNSGfke+L4mzjFNu+k060Wdey4BNT6L4Ow=
